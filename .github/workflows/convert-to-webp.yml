name: Convert images to WebP
on:
  workflow_dispatch:  # –¢–û–õ–¨–ö–û —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  convert:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: Find large SVG files
      run: |
        echo "üîç –ü–æ–∏—Å–∫ –±–æ–ª—å—à–∏—Ö SVG —Ñ–∞–π–ª–æ–≤ (>500KB)..."
        find . -name "*.svg" -size +500k -exec ls -lh {} \;
        echo ""
        echo "‚ö†Ô∏è  –≠—Ç–∏ SVG —Å–ª–∏—à–∫–æ–º –≤–µ–ª–∏–∫–∏ –¥–ª—è –≤–µ–±–∞."
        echo "   –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:"
        echo "   1. –ù–∞–π—Ç–∏ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ (JPG/PNG)"
        echo "   2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ WebP"
        echo "   3. –ó–∞–º–µ–Ω–∏—Ç—å –≤ HTML"
        
    - name: Find all images for conversion
      run: |
        echo "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:"
        echo "PNG: $(find . -name "*.png" | wc -l)"
        echo "JPG: $(find . -name "*.jpg" -o -name "*.jpeg" | wc -l)"
        echo "SVG: $(find . -name "*.svg" | wc -l)"
        
    - name: Install conversion tools
      run: |
        sudo apt-get update
        sudo apt-get install -y webp